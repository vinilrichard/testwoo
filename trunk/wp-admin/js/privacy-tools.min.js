jQuery(document).ready(function(v){var f=window.privacyToolsL10n||{};function h(e,t){e.children().addClass("hidden"),e.children("."+t).removeClass("hidden")}function g(e){e.removeClass("has-request-results"),e.next().hasClass("request-results")&&e.next().remove()}function x(e,t,a,o){var n="",s="request-results";g(e),o.length&&(v.each(o,function(e,t){n=n+"<li>"+t+"</li>"}),n="<ul>"+n+"</ul>"),e.addClass("has-request-results"),e.hasClass("status-request-confirmed")&&(s+=" status-request-confirmed"),e.hasClass("status-request-failed")&&(s+=" status-request-failed"),e.after(function(){return'<tr class="'+s+'"><th colspan="5"><div class="notice inline notice-alt '+t+'"><p>'+a+"</p>"+n+"</div></td></tr>"})}v(".export-personal-data-handle").click(function(e){var t=v(this),s=t.parents(".export-personal-data"),a=t.parents("tr"),r=s.data("request-id"),i=s.data("nonce"),d=s.data("exporters-count"),c=!!s.data("send-as-email");function l(e){h(s,"export-personal-data-failed"),e&&x(a,"notice-error",f.exportError,[e])}e.preventDefault(),e.stopPropagation(),s.blur(),g(a),h(s,"export-personal-data-processing"),function a(o,n){v.ajax({url:window.ajaxurl,data:{action:"wp-privacy-export-personal-data",exporter:o,id:r,page:n,security:i,sendAsEmail:c},method:"post"}).done(function(e){var t=e.data;e.success?t.done?o<d?setTimeout(a(o+1,1)):function(e){h(s,"export-personal-data-success"),void 0!==e?window.location=e:c||l(f.noExportFile)}(t.url):setTimeout(a(o,n+1)):l(e.data)}).fail(function(e,t,a){l(a)})}(1,1)}),v(".remove-personal-data-handle").click(function(e){var t=v(this),s=t.parents(".remove-personal-data"),r=t.parents("tr"),i=s.data("request-id"),d=s.data("nonce"),c=s.data("erasers-count"),l=!1,u=!1,p=[];function m(){h(s,"remove-personal-data-failed"),x(r,"notice-error",f.removalError,[])}e.stopPropagation(),s.blur(),g(r),h(s,"remove-personal-data-processing"),function a(o,n){v.ajax({url:window.ajaxurl,data:{action:"wp-privacy-erase-personal-data",eraser:o,id:i,page:n,security:d},method:"post"}).done(function(e){var t=e.data;e.success?(t.items_removed&&(l=l||t.items_removed),t.items_retained&&(u=u||t.items_retained),t.messages&&(p=p.concat(t.messages)),t.done?o<c?setTimeout(a(o+1,1)):function(){var e=f.noDataFound;h(s,"remove-personal-data-success"),e=!1===l?!1===u?f.noDataFound:f.noneRemoved:!1===u?f.foundAndRemoved:f.someNotRemoved,x(r,"notice-success",e,p)}():setTimeout(a(o,n+1))):m()}).fail(function(){m()})}(1,1)}),v(document).on("click",function(e){var t,a,o,n=v(e.target);if(n.is("button.privacy-text-copy")&&((a=(t=n.parent().parent()).find("div.wp-suggested-text")).length||(a=t.find("div.policy-text")),a.length))try{window.getSelection().removeAllRanges(),o=document.createRange(),a.addClass("hide-privacy-policy-tutorial"),o.selectNodeContents(a[0]),window.getSelection().addRange(o),document.execCommand("copy"),a.removeClass("hide-privacy-policy-tutorial"),window.getSelection().removeAllRanges()}catch(e){}})});